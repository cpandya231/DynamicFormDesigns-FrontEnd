<div class="forms_dashboard">

    <div class="header">
        <div class="header-name">
            <img src="../../../assets/form-template-icons/icon-{{(formId%10)+1}}.svg">
            <h2>

                {{formName}}
            </h2>
        </div>
        <div class="back-button" (click)="back()">
            <img src="../../../assets/left-arrow.svg">
            Back
        </div>
    </div>

    <div class="content">

        <div class="cta-buttons">
            <div class="filters">

                <div class="filter-menu">
                    <button mat-button [matMenuTriggerFor]="menu" class="mat-button">Filters
                        <mat-icon class="material-icons-outlined">filter_alt</mat-icon>

                    </button>

                    <mat-menu #menu="matMenu">
                        <div class="mat-menu">

                            <div class="filter-choice">
                                <input type="radio" id="filter-by-all" (change)="handleChange()" [value]="'all'"
                                    [(ngModel)]="selectedChoice">
                                <label for="filter-by-all" class="label-filter-checkbox">All</label>
                            </div>
                            <div class="filter-choice">
                                <input type="radio" id="filter-by-username" (change)="handleChange()"
                                    [value]="'username'" [(ngModel)]="selectedChoice">
                                <label for="filter-by-username" class="label-filter-checkbox">Submitted by me</label>
                            </div>
                            <div class="filter-choice">
                                <input type="radio" id="filter-by-department" (change)="handleChange()"
                                    [value]="'department'" [(ngModel)]="selectedChoice">
                                <label for=" filter-by-department" class="label-filter-checkbox">Department</label>
                            </div>


                        </div>
                    </mat-menu>

                </div>
            </div>


            <div class="submit-button" *ngIf="enableCreateNewEntry">
                <button type="submit" class="button" (click)="createNewEntry()">Create New Entry
                    <img src="../../../assets/right-arrow.svg">

                </button>
            </div>
        </div>


        <table class="table" *ngIf="isDataLoaded" #pdfTable>
            <thead>
                <tr>
                    <th colspan="1" class="empty-header"></th>
                    <th scope="col" *ngFor="let col of columns">{{col}}</th>

                </tr>

            </thead>
            <tbody>
                <tr *ngFor="let entry of logEntries | paginate : {
                    itemsPerPage: pageSize,
                    currentPage: currentPage,
                    totalItems: count
                  }; 
            let i = index">
                    <div class="table-icons">
                        <span title="Edit" class="fas fa-edit" (click)="FillForm(entry.data['id'])"></span>
                        <span title="Status" class="fas fa-hourglass-half"
                            (click)="ShowProgress(entry.data['id'])"></span>
                        <span title="Report" class="fas fa-file-text"
                            (click)="viewAuditReport(entry.data['id'])"></span>
                    </div>



                    <td *ngFor="let col of columns"
                        class="{{col}} {{(col=='state') && (entry.data[col]==finalStateName?'FinalState':'')?'FinalState':''}}">
                        {{entry.data[""+col]}}</td>


                </tr>
                <tr *ngIf="!logEntries?.length" class="no_data_message">
                    <td [attr.colspan]="(columns.length)+2">
                        No Entries Available
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="pagination-controls">
            <pagination-controls previousLabel="Prev" nextLabel="Next" [responsive]="true" [maxSize]="5"
                (pageChange)="handlePageChange($event)">

            </pagination-controls>
        </div>

    </div>
</div>